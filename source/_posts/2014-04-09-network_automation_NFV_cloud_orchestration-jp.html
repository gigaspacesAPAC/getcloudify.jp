---
layout: blogpost
title: OpenStackにおけるNFVによるネットワークオートメーション
lang: jp
categories:
    - jp
image: shaynaeh.jpg
author: Shay Naeh
tags: 
 - NFV
 - Network Automation
 - OpenStack
 - Cloud Orchestration
---
<notextile>

<p><a href="http://en.wikipedia.org/wiki/Network_Functions_Virtualization">NFV</a> (ネットワーク機能仮想化) がトレンドになるにつれて、ネットワークベンダーは、ネットワーク製品への既存投資を活用するため、それらをNFV対応にするソリューションに取り組むようになってきています。その目的は、最終的には、共用化されたハードウェア上であらゆるものを仮想ソフトウェアコンポーネントとして実行することです。</p>

<p>この目的を達成するため、私は、実際に、現実的なシナリオに基づいてテストを行うことにしました。この2回にわたるシリーズでは、YouTubeのようなソリューションを提示したいと思います。基本的には、NFV対応のビデオストリーミングソリューションで弾力的なスケールアウトとスケールインを実現します。 </p>

<p>この実験でソフトウェアロードバランサーを使用する目的は、ネットワークコンポーネント (この例では、ソフトウェアロードバランサー) をNFV対応にするというシナリオを示すためです。実際、そのようなことは、多くのネットワーク機能、そして、一般的に、ITサービスに当てはまります。ですから、ここでは、それらの機能を仮想機能 (VF) と呼ぶことにします。</p>

<hr>

<span class="pullquote-left">
  <h2><font style="font-weight: bold" size="5" face="Baskerville Old Face"><em>Beyond simple automation - OpenStack orchestration to the max.  Test drive Cloudify. </em></font>&nbsp; &nbsp; <a class="btn btn-large btn-theme btn-rounded" id="downloadBtnInner" href="http://getcloudify.org/downloads/get_cloudify_3x.html" target="_blank"><i class="icon-plus"></i> Go </a></h2></span>
  
  <hr>

<p>それだけでなく、オートスケーリングルールを使用して、弾力性に関する実証実験を行うことにしました。これについては、後で詳しく説明します。オーケストレーション部分、依存性、およびオートスケーリングについては、<a href="http://getcloudify.org/">Cloudify</a>を利用しました。</p>

<p><strong>課題</strong></p>

<p>通常、ネットワークコンポーネントをクラウドで稼働するNFVサービスに転換するには、大量のコード変更が必要です。NFVにおける大きな課題は、コードを変更せずに既存のネットワーク機能をOpenStackクラウドなどのクラウド環境に組み込むことです。各コンポーネントはレガシー環境で稼働するように構築されていますが、仮想要件とクラウド要件は考慮されていません。例えば、多くのコンポーネントは、モノリシックであり、クラウドのマルチテナント環境およびデプロイメント後のニーズ (オートスケーリング、セルフヒーリング、アクショナブルなモニタリングベースのKPIなど) をサポートするための適切な拡張機能を備えていません。それだけでなく、それぞれに、ネットワーク、コンピューティング、およびストレージの各定義に関する独自の要件があり、そのことが状況をさらに複雑にしています。また、すべてをクラウドに依存しないものにする、つまり、アプリをそのNFVコンポーネントと共に任意のクラウドで実行できるようにするという条件が加わり、不可能に近い状態になります。</p>

<p>さらに、クラウドには次のような追加機能が必要です。</p>

<p>1. 自動デプロイメント</p>

<p>2. オーケストレーション</p>

<p>3. モニタリング</p>

<p>4. セルフヒーリング</p>

<p>5. オートスケーリング</p>

<p><em><b>現在では自動化しなければ生き残れない</b></em>最終的には、ITサービス、アプリケーション、およびネットワークサービスといった、あらゆるものが自動化され、オーケストレーションされるでしょう。基本的なオーケストレーションツールとして、ChefやPuppetなどがあります。これらは、主に、ノード単位でのインストールと構成を実現しますが、ノード間の依存性をオーケストレーションしません。この場合の依存性とは、例えば、ノードAはノードBの前に起動する必要があり、ノードBは自らをノードAに登録する必要があるというようなことです。この例では、次回の記事で、Tomcatが使用可能な仮想ロードバランサー (vLB) サービスに依存するシナリオを紹介します。 </p>

<p>オーケストレーションは、必須機能であり、実際、2～5以上のポイントとなります。依存性に加え、どのような方法でシステム、アプリケーション、およびNFVサービスをモニタリングするのかという問題があります。また、どのような方法で、コンポーネントで障害が発生し、再起動が必要であることを知るのでしょうか？どのような方法で、それらすべての情報を収集するのでしょうか？どのような方法で、収集された情報にアクティブなルールを適用するのでしょうか？</p>

<p>次回の記事では、これらの課題とほぼ同じことを行う方法を実際に紹介しますので、ご期待ください。</p>

<p>自動デプロイメントフェーズでは、ビデオストリーマーソフトウェアを接続し、ネットワークコンポーネントの仮想ロードバランサーと共に、それをTomcat Webコンテナで実行しました。それから、オーケストレーターを使用して、すべてのネットワーク定義を処理しました。次に、最適なモニタリング結果を得るため、メトリック定義を設定しました。そして、カオスモンキー方式で試験を行い、どのようにシステムがオンデマンドでオートスケーリングされるかを確認しました。</p>

<p>パート2では、さらに内容を掘り下げ、どのようにすれば、こういったことを自身で行えるかを紹介します。</p>

</notextile>
